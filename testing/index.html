<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<title data-react-helmet="true">ðŸ§ª Testing | GridPlus SDK</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://gridplus.io/gridplus-sdk/testing"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ðŸ§ª Testing | GridPlus SDK"><meta data-react-helmet="true" name="description" content="All functionality is tested in some script in /test. Please see those scripts for examples on functionality not documented."><meta data-react-helmet="true" property="og:description" content="All functionality is tested in some script in /test. Please see those scripts for examples on functionality not documented."><link data-react-helmet="true" rel="icon" href="/gridplus-sdk/img/logo.jpeg"><link data-react-helmet="true" rel="canonical" href="https://gridplus.io/gridplus-sdk/testing"><link data-react-helmet="true" rel="alternate" href="https://gridplus.io/gridplus-sdk/testing" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://gridplus.io/gridplus-sdk/testing" hreflang="x-default"><link rel="stylesheet" href="/gridplus-sdk/assets/css/styles.b1533557.css">
<link rel="preload" href="/gridplus-sdk/assets/js/runtime~main.1ccb896d.js" as="script">
<link rel="preload" href="/gridplus-sdk/assets/js/main.fa07647c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/gridplus-sdk/"><div class="navbar__logo"><img src="/gridplus-sdk/img/logo.png" alt="Gridplus Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/gridplus-sdk/img/logo.png" alt="Gridplus Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/gridplus-sdk/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/gridplus/gridplus-sdk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/gridplus-sdk/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/gridplus-sdk/getting-started">ðŸŽ¬ Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/gridplus-sdk/addresses">ðŸ”‘ Addresses and Public Keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/gridplus-sdk/signing">ðŸ§¾ Signing Transactions and Messages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/gridplus-sdk/testing">ðŸ§ª Testing</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/gridplus-sdk/api/classes/client.Client">API</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>ðŸ§ª Testing</h1><p>All functionality is tested in some script in <code>/test</code>. Please see those scripts for examples on functionality not documented.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Testing is only possible with a development Lattice, which GridPlus does not distribute publicly. Therefore, if you do not have a development Lattice, you will not be able to run many of these tests.**</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="setting-up-a-test-connection">Setting up a test connection<a class="hash-link" href="#setting-up-a-test-connection" title="Direct link to heading">â€‹</a></h2><p>Only one test can be run against an unpaired Lattice: <code>npm run test</code>. Therefore this must be run before running any other tests. If you wish to run additional tests, you need to specify the following:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">env </span><span class="token constant" style="color:#36acaa">REUSE_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> npm run test</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The <code>REUSE_KEY</code> will save the connection locally so you can run future tests. Running this test will ask for your device ID and will go through the pairing process. After pairing, the rest of the script will test a broad range of SDK functionality.</p><p>To use the connection you&#x27;ve established with any test (including this initial one), you need to include your <code>DEVICE_ID</code> as an env argument:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">env </span><span class="token constant" style="color:#36acaa">DEVICE_ID</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;mydeviceid&#x27;</span><span class="token plain"> npm run test</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="global-env-options">Global <code>env</code> Options<a class="hash-link" href="#global-env-options" title="Direct link to heading">â€‹</a></h2><p>The following options can be used after <code>env</code> with any test.</p><table><thead><tr><th align="left">Param</th><th align="left">Options</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>REUSE_KEY</code></td><td align="left">Must be <code>1</code></td><td align="left">Indicates we will be creating a new pairing with a Lattice and stashing that connection</td></tr><tr><td align="left"><code>DEVICE_ID</code></td><td align="left">A six character string</td><td align="left">The device ID of the target Lattice</td></tr><tr><td align="left"><code>name</code></td><td align="left">Any 5-25 character string (default=&quot;SDK Test&quot;)</td><td align="left">The name of the pairing you will create</td></tr><tr><td align="left"><code>baseUrl</code></td><td align="left">Any URL (default=&quot;<a href="https://signing.gridpl.us%22" target="_blank" rel="noopener noreferrer">https://signing.gridpl.us&quot;</a>)</td><td align="left">URL describing where to send HTTP requests. Should be changed if your Lattice is on non-default message routing infrastructure.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="setting-up-the-env-file">Setting up the <code>.env</code> file<a class="hash-link" href="#setting-up-the-env-file" title="Direct link to heading">â€‹</a></h2><p>Alternatively, you may input <code>env</code> options into a <code>.env</code> file to make it easier to run scripts. To create your <code>.env</code> file, follow these steps:</p><ol><li>Copy the <code>.env.template</code> file.</li><li>Rename the <code>.env.template</code> file to <code>.env</code>.</li><li>Update the desired params in that file, probably your <code>DEVICE_ID</code>.</li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="firmware-test-runner">Firmware Test Runner<a class="hash-link" href="#firmware-test-runner" title="Direct link to heading">â€‹</a></h2><p>Several tests require dev Lattice firmware with the following flag in the root <code>CMakeLists.txt</code>:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token constant" style="color:#36acaa">FEATURE_TEST_RUNNER</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>See table in the next section.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="reference-tests-and-options">Reference: Tests and Options<a class="hash-link" href="#reference-tests-and-options" title="Direct link to heading">â€‹</a></h2><p>This section gives an overview of each test and which options can be passed for the specific test (in addition to global options)</p><table><thead><tr><th align="left">Test</th><th align="left">Description</th><th align="left">Uses Test Runner</th><th align="left">Additional <code>env</code> Options</th></tr></thead><tbody><tr><td align="left"><code>npm run test</code></td><td align="left">Sets up test connection and tests basic functionality like <code>getAddresses</code> and <code>sign</code>. You need to run this with <code>REUSE_KEY=1</code> and pair before running any other tests.</td><td align="left">No</td><td align="left">N/A</td></tr><tr><td align="left"><code>npm run test-signing</code></td><td align="left">Tests various aspects of the message signing path as well as all known decoders.</td><td align="left">Yes</td><td align="left"><code>SEED</code> (random string to seed a random number generator)<br><code>ETHERSCAN_KEY</code> (API key for making Etherscan requests. Used in EVM tests.)</td></tr><tr><td align="left"><code>npm run test-btc</code></td><td align="left"><em>(Legacy pathway)</em> Tests spending different types of BTC inputs. Signatures validated against <code>bitcoinjs-lib</code> using seed exported by test harness.</td><td align="left">Yes</td><td align="left"><code>N</code> (number of random vectors to populate)<br><code>SEED</code> (random string to seed a random number generator)<br><code>testnet</code> (if true, testnet addresses and transactions will also be tested)</td></tr><tr><td align="left"><code>npm run test-eth-msg</code></td><td align="left"><em>(Legacy pathway)</em> Tests Ethereum message requests <code>signPersonal</code> and <code>signTypedData</code>. Tests boundary conditions of EIP712 messages.</td><td align="left">No</td><td align="left"><code>N</code> (number of random vectors to populate)<br><code>SEED</code> (random string to seed a random number generator)</td></tr><tr><td align="left"><code>npm run test-kv</code></td><td align="left">Tests loading and using kv (key-value) files. These are used for address tags.</td><td align="left">No</td><td align="left">N/A</td></tr><tr><td align="left"><code>npm run test-non-exportable</code></td><td align="left">Tests to validate signatures from a SafeCards with a non-exportable seed (legacy)</td><td align="left">No</td><td align="left">N/A</td></tr><tr><td align="left"><code>npm run test-wallet-jobs</code></td><td align="left">Tests exported addresses and public keys against those from reference libraries using seed exported by test harness.</td><td align="left">Yes</td><td align="left">N/A</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/gridplus/gridplus-sdk/docs/testing.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/gridplus-sdk/signing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ðŸ§¾ Signing Transactions and Messages</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/gridplus-sdk/api/classes/client.Client"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Class: Client</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setting-up-a-test-connection" class="table-of-contents__link toc-highlight">Setting up a test connection</a></li><li><a href="#global-env-options" class="table-of-contents__link toc-highlight">Global <code>env</code> Options</a></li><li><a href="#setting-up-the-env-file" class="table-of-contents__link toc-highlight">Setting up the <code>.env</code> file</a></li><li><a href="#firmware-test-runner" class="table-of-contents__link toc-highlight">Firmware Test Runner</a></li><li><a href="#reference-tests-and-options" class="table-of-contents__link toc-highlight">Reference: Tests and Options</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/gridplus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/gridplus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/gridplus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.gridplus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/gridplus/gridplus-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 GridPlus, Inc.</div></div></div></footer></div>
<script src="/gridplus-sdk/assets/js/runtime~main.1ccb896d.js"></script>
<script src="/gridplus-sdk/assets/js/main.fa07647c.js"></script>
</body>
</html>